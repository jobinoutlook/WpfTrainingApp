<Application x:Class="WpfThemeApp.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:WpfThemeApp"
             xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
             xmlns:behaviors="clr-namespace:WpfThemeApp.Behaviors"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <!-- Shared Style for Custom Title Bar -->
        <Style x:Key="CustomWindowStyle" TargetType="Window">
            <Setter Property="WindowStyle" Value="None"/>
            <Setter Property="AllowsTransparency" Value="True"/>
            <Setter Property="Background" Value="White"/>
            <!--<Setter Property="shell:WindowChrome.WindowChrome">
                <Setter.Value>
                    <shell:WindowChrome
                        CornerRadius="10"
                        GlassFrameThickness="0"
                        ResizeBorderThickness="5"
                        CaptionHeight="32"
                        UseAeroCaptionButtons="False"/>
                </Setter.Value>
            </Setter>-->


            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Window">
                        <Border  BorderBrush="Gray" BorderThickness="1" CornerRadius="0"  Background="{TemplateBinding Background}">
                      



                            <DockPanel>
                                <!-- Custom Title Bar -->

                                <Grid Background="#2D2D30" Height="32" DockPanel.Dock="Top"
                                      MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                                    <!--behaviors:WindowButtonBehaviors.EnableTitleBarDoubleClick="True"-->

                                      
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Title -->
                                    <TextBlock Text="{TemplateBinding Title}"
                                               VerticalAlignment="Center"
                                               Foreground="White"
                                               Margin="10,0,0,0"/>

                                    <Button Grid.Column="1" Content="—" Width="40" Height="32"
                                        behaviors:WindowButtonBehaviors.Minimize="True"/>

                                    <!-- Maximize/Restore Button -->
                                    <Button Grid.Column="2" Content="□" Width="40" Height="32"
                                        behaviors:WindowButtonBehaviors.MaximizeRestore="True"/>

                                    <!-- Close Button -->
                                    <Button Grid.Column="3" Content="X" Width="40" Height="32"
                                        behaviors:WindowButtonBehaviors.Close="True"/>


                                    <!--Background="Red" Foreground="White"-->
                                </Grid>

                                <!-- Window Content -->
                                <AdornerDecorator>
                                    <ContentPresenter/>
                                </AdornerDecorator>
                            </DockPanel>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Application.Resources>
</Application>
